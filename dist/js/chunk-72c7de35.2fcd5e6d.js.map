{"version":3,"sources":["webpack:///./src/pages/simulateExamManage/index.vue?49cd","webpack:///./src/api/simulateExamManageApi.js","webpack:///./src/pages/simulateExamManage/index.vue","webpack:///./src/pages/simulateExamManage/index.vue?31a8","webpack:///./src/pages/simulateExamManage/index.vue?f89e","webpack:///./src/pages/simulateExamManage/index.vue?d783"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","getSimulateExam","data","http","post","addAndUpdateExam","deleteSimulateExam","get","loading","ref","formInline","reactive","query","id","sortOptions","props","children","label","value","getSortOptions","getAllQuestionType","then","res","finally","totalData","pageable","page","limit","tableData","rules","examName","required","message","trigger","questionScore","typeId","duration","totalScore","passScore","status","formOptions","prop","type","options","render","onUpdateData","_data$questionScore","total","split","reduce","pre","item","Number","_createVNode2","_resolveComponent2","append","changeData","val","$event","columns","row","findFields","toRaw","typeName","default","width","fixed","onClick","openDialog","_createTextVNode2","deleteTag","getTableData","params","length","refresh","search","examId","ElMessageBox","confirm","confirmButtonText","cancelButtonText","msg","success","catch","ElMessage","onMounted","detailData","show","onSizeChange","pageSize","onCurrentChange","pageNum","__exports__","content","__esModule","locals","add"],"mappings":"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","file":"js/chunk-72c7de35.2fcd5e6d.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".el-menu .el-menu-item[data-v-0fb34af6],.el-menu .el-sub-menu__title[data-v-0fb34af6]{color:#666;font-size:.08333rem;position:relative}.el-menu .el-menu-item svg[data-v-0fb34af6],.el-menu .el-sub-menu__title svg[data-v-0fb34af6]{font-size:.13542rem;margin:-.01042rem .05208rem 0 0}.el-menu .el-menu-item .xian[data-v-0fb34af6],.el-menu .el-sub-menu__title .xian[data-v-0fb34af6]{position:absolute;left:.18229rem;top:0;bottom:0;border-left:.01042rem solid #edeff2}.el-menu .el-menu-item.is-active[data-v-0fb34af6],.el-menu .el-menu-item[data-v-0fb34af6]:hover,.el-menu .el-sub-menu__title.is-active[data-v-0fb34af6],.el-menu .el-sub-menu__title[data-v-0fb34af6]:hover{background-color:rgba(0,0,0,.1);color:var(--color1,#0c969a)}.el-menu .el-menu-item.is-active .xian[data-v-0fb34af6],.el-menu .el-menu-item:hover .xian[data-v-0fb34af6],.el-menu .el-sub-menu__title.is-active .xian[data-v-0fb34af6],.el-menu .el-sub-menu__title:hover .xian[data-v-0fb34af6]{border-left:.01042rem solid var(--color1,#0c969a)}.el-menu--collapse .el-menu-item svg[data-v-0fb34af6],.el-menu--collapse .el-sub-menu__title svg[data-v-0fb34af6]{margin:0}.el-menu--vertical .el-menu[data-v-0fb34af6]{background-color:#fff}.el-menu--vertical .el-menu .el-menu-item[data-v-0fb34af6]:hover{background-color:rgba(0,0,0,.1)}.content[data-v-0fb34af6]{height:100%;background:#fff;padding:.10417rem .05208rem}.content .search[data-v-0fb34af6]{height:.41667rem;display:flex;justify-content:space-between}.content .table_box[data-v-0fb34af6]{height:calc(100% - .41667rem)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\r\n * @描述信息: 真题考试\r\n * @Author:\r\n */\r\n\r\nimport http from '@/http/http'\r\n\r\n// 获取所有真题\r\nexport const getSimulateExam = (data) => http.post(`/exam/exam/getSimulateExam`,data)\r\n\r\n// 更新新增真题\r\nexport const addAndUpdateExam = data => http.post('/exam/exam/updateSimulateExam',data)\r\n\r\n// 删除真题\r\nexport const deleteSimulateExam = data => http.get('/exam/exam/deleteSimulateExam',data)","<template>\r\n  <div class=\"content\" v-loading=\"loading\">\r\n    <div class=\"search\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"考试名称\">\r\n          <el-input v-model=\"formInline.query\"/>\r\n        </el-form-item>\r\n         <el-form-item label=\"所属分类\">\r\n          <el-cascader v-model=\"formInline.id\" :options=\"sortOptions\" :props=\"props\" @change=\"getAgainCategory\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btns\">\r\n        <el-button type=\"primary\" :icon=\"Search\" @click.stop=\"search\">查询</el-button>\r\n        <el-button :icon=\"Refresh\" @click.stop=\"refresh\">重置</el-button>\r\n        <el-button type=\"primary\" :icon=\"Plus\" @click.stop=\"openDialog(1)\">新增</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"table_box\">\r\n      <CommonTable :tableData=\"tableData\"\r\n                   :columns=\"columns\"\r\n                   :totalData=\"totalData\"\r\n                   :pageable=\"pageable\"\r\n                   @onSizeChange=\"onSizeChange\"\r\n                   @onCurrentChange=\"onCurrentChange\" />\r\n    </div>\r\n    <template v-if=\"detailData.show\">\r\n      <CommonDialogForm\r\n          v-model=\"detailData.show\"\r\n          title=\"真题管理\"\r\n          width='60%'\r\n          :rules='rules'\r\n          :dialogType=\"detailData.type\"\r\n          :form-option=\"formOptions()\"\r\n          :form-data=\"detailData.data\"\r\n          :update-request-url=\"addAndUpdateExam\"\r\n          :add-request-url=\"addAndUpdateExam\"\r\n          @refresh-data=\"getTableData\"\r\n      />\r\n    </template>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"jsx\">\r\nimport CommonTable from \"@/components/commonTable\";\r\nimport {onMounted, reactive, ref, toRaw} from \"vue\";\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Search, Refresh, Plus } from '@element-plus/icons-vue'\r\nimport CommonDialogForm from \"@/components/CommonDialogForm\"\r\nimport {getSimulateExam,addAndUpdateExam,deleteSimulateExam} from \"@/api/simulateExamManageApi\";\r\nimport {getAllQuestionType} from \"@/api/tagManageApi\"\r\nimport msg from \"@/utils/resetMessage\";\r\nimport {findFields} from \"@/utils/utilsTool.js\"\r\n\r\n\r\nconst loading = ref(false)\r\n\r\n\r\nconst formInline = reactive({\r\n  query: '',\r\n  id: [1,2]\r\n})\r\nconst sortOptions = ref([])\r\nconst props = { children:'questionTypes',label:'typeName',value:'id' }\r\nfunction getSortOptions(){\r\n  getAllQuestionType()\r\n      .then(res=>{  \r\n        sortOptions.value =  res\r\n      })\r\n      .finally(()=>{})\r\n}\r\n\r\n\r\nconst totalData = ref(0)\r\nconst pageable = reactive({\r\n  page: 1, limit: 15\r\n})\r\nconst tableData = ref([])\r\nconst rules = {\r\n  examName:[{required: true, message: '请输入考试名称', trigger: 'blur'}],\r\n  questionScore:[{required: true, message: '请设置问题得分', trigger: 'blur'}],\r\n  typeId:[{required: true, message: '请选择具体分类', trigger: 'blur'}],\r\n  duration:[{required: true, message: '请设置考试时间', trigger: 'blur'}],\r\n  totalScore:[{required: true, message: '请设置考试总分', trigger: 'blur'}],\r\n  passScore:[{required: true, message: '请设置及格线', trigger: 'blur'}],\r\n  status:[{required: true, message: '请选择考试状态', trigger: 'blur'}],\r\n}\r\nconst formOptions = ()=>[\r\n  {label:'考试名称',prop:'examName',type:'input'},\r\n  {label:'问题得分',prop:'questionScore',type:'setScore'},\r\n  {label:'具体分类',prop: 'typeId',type:'cascader',options:sortOptions.value,props:{ children:'questionTypes',label:'typeName',value:'id' }},\r\n  {label:'考试时间',prop:'duration',type:'input'},\r\n  {label:'考试总分',prop:'totalScore',render:({data,onUpdateData})=>{\r\n    let total = data.questionScore?.split('#') || []\r\n    let value = total.reduce((pre,item)=>{\r\n        return pre + Number(item)\r\n    },0)\r\n    onUpdateData(value,'totalScore')\r\n    return (\r\n        <el-input input-style={{'text-align':'center'}} model-value={value} disabled v-slots={{\r\n                append:()=>'分'\r\n            }}/>\r\n    )\r\n  }},\r\n  {label:'及格线',prop:'passScore',render:({data,onUpdateData})=>{\r\n    const changeData = (val)=> onUpdateData(val,'passScore')\r\n    return (\r\n        <el-input input-style={{'text-align':'center'}} onChange={changeData} v-model={data.passScore}  v-slots={{\r\n                append:()=>'分'\r\n            }}/>\r\n    )\r\n  }},\r\n  {label:'考试状态',prop:'status',type:'select',options:[{label:'有效',value:0},{label:'无效',value:1}]},\r\n  {label:'考试描述',prop:'examDesc',type:'textarea'},\r\n]\r\nconst columns = ref([\r\n  {label:'考试名称', prop:'examName'},\r\n  {label:'具体分类', prop:'typeId',render:({row})=>{\r\n    let res = findFields(toRaw(sortOptions.value),'id',row.typeId,'questionTypes')\r\n    return res && res.typeName \r\n  }},\r\n  {label:'考试时间（min）', prop:'duration'},\r\n  {label:'考试及格线', prop:'passScore'},\r\n  {label:'考试总分', prop:'totalScore'},\r\n  {label:'考试状态', prop:'status',render:({row})=>{\r\n    return <el-tag type={row.status?'error':'success'}>{['有效','无效'][row.status]}</el-tag>\r\n  }},\r\n  {label:'考试描述', prop:'examDesc'},\r\n  {\r\n    label: \"操作\", width: 120, fixed: 'right', render: ({row}) => {\r\n      return (\r\n          <div>\r\n            <el-button type=\"primary\" link onClick={()=>openDialog(0,row)}>\r\n              编辑\r\n            </el-button>\r\n            <el-button type=\"danger\" link onClick={()=>deleteTag(row.id)}>\r\n              删除\r\n            </el-button>\r\n          </div>\r\n      )\r\n    }\r\n  },    \r\n])\r\n\r\nonMounted(()=>{\r\n  getSortOptions()\r\n  getTableData()\r\n})\r\n\r\nfunction getTableData(){\r\n  loading.value = true\r\n  let params = {\r\n    query:formInline.query,\r\n    typeId:formInline.id[formInline.id.length - 1],\r\n  }\r\n  getSimulateExam(params)\r\n      .then(res=>{\r\n        tableData.value = res\r\n      })\r\n    .finally(()=>loading.value = false)\r\n}\r\nfunction refresh(){\r\n formInline.query = ''\r\n  formInline.id = [1,2]\r\n    search()\r\n}\r\nfunction search(){\r\n  pageable.page = 1\r\n  getTableData()\r\n}\r\nfunction deleteTag(examId){\r\n  ElMessageBox.confirm('确定删除吗？',{confirmButtonText:'确定',cancelButtonText:'取消'}).then(()=>{\r\n  let params = {examId}\r\n  deleteSimulateExam(params)\r\n      .then(res=>{\r\n        msg.success('删除成功')\r\n        getTableData()\r\n      })\r\n  }).catch(()=>{\r\n    ElMessage({type:'info',message:'已取消'})\r\n  })\r\n}\r\n\r\nconst detailData = reactive({\r\n  show:false,\r\n  type:0,\r\n  data:{}\r\n})\r\nfunction openDialog(type=0,data){\r\n  detailData.show = true\r\n  detailData.type = type\r\n  detailData.data = data\r\n}\r\n\r\nfunction onSizeChange(val) {\r\n  pageable.pageSize = val\r\n  getTableData()\r\n}\r\n\r\nfunction onCurrentChange(val) {\r\n  pageable.pageNum = val\r\n  getTableData()\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.content {\r\n  height: 100%;\r\n  background: #ffffff;\r\n  padding: 20px 10px;\r\n  .search{\r\n    height: 80px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .table_box{\r\n    height: calc(100% - 80px);\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\n\nimport \"./index.vue?vue&type=style&index=0&id=0fb34af6&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/fang/Downloads/uniapp-考试测试/exammanage/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0fb34af6\"]])\n\nexport default __exports__","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=0fb34af6&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"15c6472c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=0fb34af6&scoped=true&lang=scss\""],"sourceRoot":""}