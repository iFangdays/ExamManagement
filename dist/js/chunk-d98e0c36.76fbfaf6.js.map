{"version":3,"sources":["webpack:///./src/pages/systemManage/tacticsManage/index.vue?7ef3","webpack:///./src/api/tacticsManageApi.js","webpack:///./src/pages/systemManage/tacticsManage/index.vue","webpack:///./src/pages/systemManage/tacticsManage/index.vue?cb09","webpack:///./src/pages/systemManage/tacticsManage/index.vue?f526","webpack:///./src/pages/systemManage/tacticsManage/index.vue?eb04"],"names":["content","__esModule","default","module","i","locals","exports","add","getAllConfigs","data","http","post","updateQuestionType","deleteConfigById","id","get","loading","ref","sortOptions","onlyFatherOptions","props","children","label","value","getSortOptions","getAllQuestionType","then","res","map","questionTypes","length","item","typeName","finally","getTableData","formInline","reactive","totalData","pageable","page","limit","tableData","rules","code","required","message","trigger","status","formOptions","prop","type","options","columns","width","align","render","row","findFields","toRaw","typeId","_createVNode2","_resolveComponent2","fixed","onClick","openDialog","_createTextVNode2","deleteTag","params","refresh","search","msg","warning","ElMessageBox","confirm","confirmButtonText","cancelButtonText","catch","ElMessage","onMounted","detailData","show","onSizeChange","val","pageSize","onCurrentChange","pageNum","__exports__","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"js/chunk-d98e0c36.76fbfaf6.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=63f7b889&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"ea148a8a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","/*\r\n * @描述信息: 推荐策略\r\n * @Author:\r\n */\r\n\r\nimport http from '@/http/http'\r\n\r\n\r\n// 获取所有策略\r\nexport const getAllConfigs = (data) => http.post(`/exam/config/getAllConfigs`,data)\r\n\r\n// 更新/新增策略\r\nexport const updateQuestionType = (data) => http.post('/exam/config/updateConfig',data)\r\n\r\n// 删除策略 \r\nexport const deleteConfigById = (id) => http.get('/exam/config/deleteConfigById',id)","<template>\r\n  <div class=\"content\" v-loading=\"loading\">\r\n    <div class=\"search\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"所属分类\">\r\n          <el-cascader\r\n              v-model=\"formInline.id\"\r\n              :options=\"sortOptions\"\r\n              :props=\"props\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btns\">\r\n        <el-button type=\"primary\" :icon=\"Search\" @click.stop=\"search\">查询</el-button>\r\n        <el-button :icon=\"Refresh\" @click.stop=\"refresh\">重置</el-button>\r\n        <el-button type=\"primary\" :icon=\"Plus\" @click.stop=\"openDialog(1)\">新增</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"table_box\">\r\n      <CommonTable :tableData=\"tableData\"\r\n                   :columns=\"columns\"\r\n                   :totalData=\"totalData\"\r\n                   :pageable=\"pageable\"\r\n                   @onSizeChange=\"onSizeChange\"\r\n                   @onCurrentChange=\"onCurrentChange\" />\r\n    </div>\r\n    <template v-if=\"detailData.show\">\r\n      <CommonDialogForm\r\n          v-model=\"detailData.show\"\r\n          title=\"推荐策略管理\"\r\n          :rules='rules'\r\n          :dialogType=\"detailData.type\"\r\n          :form-option=\"formOptions()\"\r\n          :form-data=\"detailData.data\"\r\n          :update-request-url=\"updateQuestionType\"\r\n          :add-request-url=\"updateQuestionType\"\r\n          @refresh-data=\"getTableData\"\r\n      />\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"jsx\">\r\nimport CommonTable from \"@/components/commonTable\";\r\nimport {onMounted, reactive, ref, toRaw} from \"vue\";\r\nimport { ElMessage,ElMessageBox } from 'element-plus'\r\nimport { Search, Refresh, Plus } from '@element-plus/icons-vue'\r\nimport CommonDialogForm from \"@/components/CommonDialogForm\"\r\nimport {getAllConfigs,deleteConfigById,updateQuestionType} from \"@/api/tacticsManageApi\";\r\nimport {getAllQuestionType} from \"@/api/tagManageApi\"\r\nimport msg from \"@/utils/resetMessage\";\r\nimport {findFields} from \"@/utils/utilsTool.js\"\r\n\r\nconst loading = ref(false)\r\n\r\nconst sortOptions = ref([])\r\nconst onlyFatherOptions = ref([])\r\nconst props = { children:'questionTypes',label:'typeName',value:'id' }\r\nfunction getSortOptions(){\r\n  getAllQuestionType()\r\n      .then(res=>{\r\n        onlyFatherOptions.value = res.map(i=>{\r\n          if(i.questionTypes.length){\r\n           return i.questionTypes.map(item=>{\r\n              return {label:item.typeName,value:item.id}\r\n            })\r\n          }\r\n        })    \r\n        sortOptions.value =  res\r\n      })\r\n      .finally(()=>getTableData())\r\n}\r\n\r\nconst formInline = reactive({\r\n  id:[1,2],\r\n})\r\n\r\nconst totalData = ref(0)\r\nconst pageable = reactive({\r\n  page: 1, limit: 15\r\n})\r\nconst tableData = ref([])\r\nconst rules = {\r\n  code:[{required: true, message: '请输入配置名称', trigger: 'blur'}],\r\n  value:[{required: true, message: '请输入配置项值', trigger: 'blur'}],\r\n  status:[{required: true, message: '请选择状态', trigger: 'blur'}],\r\n}\r\nconst formOptions = ()=>[\r\n  {label:'配置名称',prop:'code',type:'input'},\r\n  {label:'配置项值',prop:'value',type:'input'},\r\n  {label: '所属分类', prop: 'typeId',type:'cascader',options:sortOptions.value,props:{ children:'questionTypes',label:'typeName',value:'id' }},\r\n  {label:'状态',prop:'status',type:'select',options:[{label:'正常',value:0},{label:'失效',value:1}]},\r\n  {label:'备注',prop:'msg',type:'textarea'},\r\n]\r\nconst columns = ref([\r\n  {label:'序号',type:'index',width:80,align:'center'},\r\n  {label:'配置项名称', prop:'code'},\r\n  {label:'配置项值', prop:'value'},\r\n  {label:'所属分类', prop:'typeId',render:({row})=>{\r\n    let res = findFields(toRaw(sortOptions.value),'id',row.typeId,'questionTypes')\r\n    return res && res.typeName \r\n  }},\r\n\r\n  {label:'状态', prop:'status',render:({row})=>{\r\n    return <el-tag type={row.status?'error':'success'}>{['正常','失效'][row.status]}</el-tag>\r\n  }},\r\n  {label:'更新时间',prop:'updateTime'},\r\n    {label:'备注', prop:'msg'},\r\n  {\r\n    label: \"操作\", width: 120, fixed: 'right', render: ({row}) => {\r\n      return (\r\n          <div>\r\n            <el-button type=\"primary\" link onClick={()=>openDialog(0,row)}>\r\n              编辑\r\n            </el-button>\r\n            <el-button type=\"danger\" link onClick={()=>deleteTag(row.id)}>\r\n              删除\r\n            </el-button>\r\n          </div>\r\n      )\r\n    }\r\n  },\r\n])\r\n\r\nonMounted(()=>{\r\n  getSortOptions()\r\n})\r\n\r\nfunction getTableData(typeId = 2){\r\n  loading.value = true\r\n  let params = {typeId}\r\n  getAllConfigs(params)\r\n      .then(res=>{\r\n        tableData.value = res\r\n      })\r\n      .finally(()=>loading.value = false)\r\n}\r\nfunction refresh(){\r\n  formInline.id = [1,2]\r\n  pageable.page = 1\r\n  getTableData()\r\n}\r\nfunction search(){\r\n  let {id} = formInline\r\n  if(!id.length){\r\n    msg.warning('请选择分类')\r\n  }else{\r\n    pageable.page = 1\r\n    getTableData(id[id.length - 1])\r\n  }\r\n}\r\nfunction deleteTag(id){\r\n  ElMessageBox.confirm('确定删除吗？',{confirmButtonText:'确定',cancelButtonText:'取消'}).then(()=>{\r\n  let params = {id}\r\n  deleteConfigById(params)\r\n    .then(res=>{\r\n      getTableData()\r\n    })\r\n  }).catch(()=>{\r\n    ElMessage({type:'info',message:'已取消'})\r\n  })\r\n}\r\n\r\nconst detailData = reactive({\r\n  show:false,\r\n  type:0,\r\n  data:{}\r\n})\r\nfunction openDialog(type=0,data){\r\n  detailData.show = true\r\n  detailData.type = type\r\n  detailData.data = data\r\n}\r\n\r\nfunction onSizeChange(val) {\r\n  pageable.pageSize = val\r\n  getTableData()\r\n}\r\n\r\nfunction onCurrentChange(val) {\r\n  pageable.pageNum = val\r\n  getTableData()\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.content {\r\n  height: 100%;\r\n  background: #ffffff;\r\n  padding: 20px 10px;\r\n  .search{\r\n    height: 80px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n  .table_box{\r\n    height: calc(100% - 80px);\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\n\nimport \"./index.vue?vue&type=style&index=0&id=63f7b889&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/fang/Downloads/uniapp-考试测试/exammanage/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-63f7b889\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=63f7b889&scoped=true&lang=scss\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".el-menu .el-menu-item[data-v-63f7b889],.el-menu .el-sub-menu__title[data-v-63f7b889]{color:#666;font-size:.08333rem;position:relative}.el-menu .el-menu-item svg[data-v-63f7b889],.el-menu .el-sub-menu__title svg[data-v-63f7b889]{font-size:.13542rem;margin:-.01042rem .05208rem 0 0}.el-menu .el-menu-item .xian[data-v-63f7b889],.el-menu .el-sub-menu__title .xian[data-v-63f7b889]{position:absolute;left:.18229rem;top:0;bottom:0;border-left:.01042rem solid #edeff2}.el-menu .el-menu-item.is-active[data-v-63f7b889],.el-menu .el-menu-item[data-v-63f7b889]:hover,.el-menu .el-sub-menu__title.is-active[data-v-63f7b889],.el-menu .el-sub-menu__title[data-v-63f7b889]:hover{background-color:rgba(0,0,0,.1);color:var(--color1,#0c969a)}.el-menu .el-menu-item.is-active .xian[data-v-63f7b889],.el-menu .el-menu-item:hover .xian[data-v-63f7b889],.el-menu .el-sub-menu__title.is-active .xian[data-v-63f7b889],.el-menu .el-sub-menu__title:hover .xian[data-v-63f7b889]{border-left:.01042rem solid var(--color1,#0c969a)}.el-menu--collapse .el-menu-item svg[data-v-63f7b889],.el-menu--collapse .el-sub-menu__title svg[data-v-63f7b889]{margin:0}.el-menu--vertical .el-menu[data-v-63f7b889]{background-color:#fff}.el-menu--vertical .el-menu .el-menu-item[data-v-63f7b889]:hover{background-color:rgba(0,0,0,.1)}.content[data-v-63f7b889]{height:100%;background:#fff;padding:.10417rem .05208rem}.content .search[data-v-63f7b889]{height:.41667rem;display:flex;justify-content:space-between}.content .table_box[data-v-63f7b889]{height:calc(100% - .41667rem)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}