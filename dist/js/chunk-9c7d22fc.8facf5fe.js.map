{"version":3,"sources":["webpack:///./src/pages/systemManage/usersManage/index.vue","webpack:///./src/pages/systemManage/usersManage/index.vue?d14e","webpack:///./src/pages/systemManage/usersManage/index.vue?b6eb","webpack:///./src/pages/systemManage/usersManage/index.vue?9f49","webpack:///./src/pages/systemManage/usersManage/index.vue?a993"],"names":["loading","ref","formInline","reactive","nickname","commonTable","changeUserStatus","show","value","userIds","statusOptions","label","openChangeUserStatus","getSelection","tableRef","getSelectionRows","length","map","i","id","msg","warning","onSureChange","params","operation","handleUser","then","res","getTableData","userRoleOptions","getUserRole","getAllRole","roleName","totalData","pageable","page","limit","tableData","formOptions","prop","render","_createVNode2","_resolveComponent2","data","type","disabled","isEdit","options","rules","required","message","trigger","roleId","password","username","pattern","columns","width","align","row","_createTextVNode2","_","status","default","fixed","onClick","openDialog","pageNo","pageSize","getAllUsers","total","finally","search","reset","onMounted","detailData","onSizeChange","val","onCurrentChange","pageNum","__exports__","content","__esModule","module","locals","exports","add","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"js/chunk-9c7d22fc.8facf5fe.js","sourcesContent":["<template>\r\n  <div class=\"content\" v-loading=\"loading\">\r\n    <div class=\"search\">\r\n      <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n        <el-form-item label=\"用户名称\">\r\n          <el-input v-model=\"formInline.nickname\" placeholder=\"请输入\" clearable/>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btns\">\r\n        <el-button type=\"primary\" :icon=\"Search\" @click.stop=\"search\">查询</el-button>\r\n        <el-button :icon=\"Refresh\" @click=\"reset\">重置</el-button>\r\n        <el-button type=\"primary\" :icon=\"Plus\" @click.stop=\"openDialog(1)\">新增</el-button>\r\n         <el-button type=\"warning\" @click.stop=\"openChangeUserStatus\">修改状态</el-button>\r\n      </div>\r\n    </div>\r\n    <div class=\"table_box\">\r\n      <CommonTable :tableData=\"tableData\"\r\n                   :columns=\"columns\"\r\n                   :totalData=\"totalData\"\r\n                   :pageable=\"pageable\"\r\n                   ref=\"commonTable\"\r\n                   @onSizeChange=\"onSizeChange\"\r\n                   @onCurrentChange=\"onCurrentChange\"/>\r\n    </div>\r\n    <template v-if=\"detailData.show\">\r\n      <CommonDialogForm\r\n          v-model=\"detailData.show\"\r\n          title=\"用户管理\"\r\n          :dialogType=\"detailData.type\"\r\n          :form-data=\"detailData.data\"\r\n          :form-option=\"formOptions()\"\r\n          :rules=\"rules\"\r\n          :addRequestUrl=\"addUser\"\r\n          :updateRequestUrl=\"updateUserRoleStatus\"\r\n          @refreshData=\"getTableData\"\r\n      />\r\n    </template>\r\n    <template v-if=\"changeUserStatus.show\">\r\n      <el-dialog v-model=\"changeUserStatus.show\" title=\"修改状态\" width=\"400px\">\r\n            <div class=\"changeUserStatus_content\">\r\n              <span> 账号状态: </span>\r\n            <el-select v-model=\"changeUserStatus.value\"  placeholder=\"请选择\" clearable >\r\n              <el-option :label=\"option.label\" :value=\"option.value\" v-for=\"(option,i) in statusOptions\" :key=\"i\"/>\r\n            </el-select>\r\n            </div>\r\n                <template #footer>\r\n            <span class=\"dialog-footer\">\r\n                <el-button type=\"primary\" @click.stop=\"onSureChange\">确定</el-button>\r\n            </span>\r\n    </template>\r\n      </el-dialog>\r\n    </template>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"jsx\">\r\nimport CommonTable from \"@/components/commonTable\";\r\nimport CommonDialogForm from \"@/components/CommonDialogForm\"\r\nimport {onMounted, reactive, ref} from \"vue\";\r\nimport {Search, Refresh, Plus} from '@element-plus/icons-vue'\r\nimport {getAllUsers,addUser,updateUserRoleStatus,getAllRole,handleUser} from \"@/api/user\";\r\nimport msg from \"@/utils/resetMessage\"\r\nconst loading = ref(false)\r\n\r\nconst formInline = reactive({\r\n  nickname: '',\r\n})\r\n\r\nconst commonTable = ref(null)\r\nconst changeUserStatus = reactive({\r\n  show:false,\r\n  value:0,\r\n  userIds:null\r\n})\r\nconst statusOptions = [\r\n  {label:'启用',value:0},\r\n  {label:'禁用',value:1},\r\n  {label:'删除',value:2},\r\n]\r\nfunction openChangeUserStatus(){\r\n  let getSelection = commonTable.value.tableRef.getSelectionRows()\r\n  if(!getSelection.length){\r\n    msg.warning('请勾选用户')\r\n  }else{\r\n    changeUserStatus.show = true\r\n    userIds:changeUserStatus.userIds = getSelection.map(i=>i.id)\r\n  }\r\n}\r\nfunction onSureChange(){\r\n  let params = {\r\n    operation:changeUserStatus.value,\r\n    userIds:changeUserStatus.userIds\r\n  }\r\n  handleUser(params)\r\n    .then(res=>{\r\n      changeUserStatus.show = false\r\n      changeUserStatus.value = 0\r\n      changeUserStatus.userIds = null\r\n      getTableData()\r\n    })\r\n}\r\n\r\nconst userRoleOptions = ref([])\r\nfunction getUserRole(){\r\n  getAllRole()\r\n    .then(res=>{\r\n      userRoleOptions.value = res.map(i=>{\r\n        return {label:i.roleName,value:i.id}\r\n      })\r\n    })\r\n}\r\n\r\nconst totalData = ref(0)\r\nconst pageable = reactive({\r\n  page: 1, limit: 15\r\n})\r\nconst tableData = ref([])\r\nconst formOptions = ()=>[\r\n  {\r\n    label: '头像', prop: 'avatarUrl', render: (prop) => {\r\n      return <el-avatar size={100} src={prop.data || 'https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png'} />\r\n    }\r\n  },\r\n  {label: '昵称', prop: 'nickname', type: 'input'},\r\n  {label: '用户名', prop: 'username', type: 'input',disabled:isEdit.value},\r\n  {label: '密码', prop: 'password', type: 'passwordInput'},\r\n  {label: '角色', prop:'roleId',type:'select',options:userRoleOptions.value},\r\n  {label: '手机号', prop: 'mobile', type: 'input'},\r\n  \r\n]\r\nconst rules = {\r\n  nickname: [{required: true, message: '请输入昵称', trigger: 'blur'}],\r\n  roleId:[{required: true, message: '请选择角色', trigger: 'blur'}],\r\n  password:[{required: true, message: '请输入密码', trigger: 'blur'}],\r\n  username:[{required: true, message: '请输入用户名', trigger: 'blur',},{pattern:/^[A-z]{5,10}$/,message: '请输入5-10位纯英文', trigger: 'blur',}]\r\n}\r\n\r\nconst columns = ref([\r\n  {label: '选择', type: 'selection', width: 80, align: 'center'},\r\n  {label: '昵称', prop: 'nickname'},\r\n  {label: '用户名', prop: 'username'},\r\n  {label: '头像地址', prop: 'avatarUrl'},\r\n  {label: '角色', prop: 'roleId',render:({row})=>{\r\n    return <span> {[_,'普通用户','管理员'][row.roleId]}</span>\r\n  }},\r\n  {label: '状态', prop: 'status',render:({row})=>{\r\n    return <el-tag type={row.status?'error':'success'}>{['正常','失效'][row.status]}</el-tag>\r\n  }},\r\n  {label: '手机号', prop: 'mobile'},\r\n  {\r\n    label: \"操作\", width: 150, fixed: 'right', render: ({row}) => {\r\n      return (\r\n          <div>\r\n            <el-button type=\"primary\" link onClick={()=>openDialog(0,row)}>\r\n              编辑\r\n            </el-button>\r\n          </div>\r\n      )\r\n    }\r\n  },\r\n])\r\n\r\nonMounted(()=>{\r\n  getUserRole()\r\n  getTableData()\r\n})\r\n\r\nfunction getTableData() {\r\n  loading.value = true\r\n  let params = {\r\n    ...formInline,\r\n    pageNo:pageable.page,\r\n    pageSize:pageable.limit\r\n  }\r\n  getAllUsers(params)\r\n    .then(res=>{\r\n      tableData.value = res.data\r\n      totalData.value = res.total\r\n    })\r\n    .finally(()=>loading.value = false)\r\n}\r\n\r\nfunction search() {\r\n  pageable.page = 1\r\n  getTableData()\r\n}\r\n\r\nfunction reset(){\r\n  formInline.nickname = ''\r\n  search()\r\n}\r\n\r\nconst detailData = reactive({\r\n  show: false,\r\n  data: {}\r\n})\r\n\r\nconst isEdit = ref(false)\r\n\r\nfunction openDialog(type = 0,data) {\r\n  detailData.show = true\r\n  detailData.type = type\r\n  detailData.data = data\r\n  isEdit.value = !type\r\n}\r\n\r\nfunction onSizeChange(val) {\r\n  pageable.pageSize = val\r\n  getTableData()\r\n}\r\n\r\nfunction onCurrentChange(val) {\r\n  pageable.pageNum = val\r\n  getTableData()\r\n}\r\n\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.content {\r\n  height: 100%;\r\n  background: #ffffff;\r\n  padding: 20px 10px;\r\n\r\n  .search {\r\n    height: 80px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .table_box {\r\n    height: calc(100% - 80px);\r\n  }\r\n}\r\n.changeUserStatus_content{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  span{\r\n    margin: 0 20px;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=jsx\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1fe7b22a&scoped=true&lang=scss\"\n\nimport exportComponent from \"/Users/fang/Downloads/uniapp-考试测试/exammanage/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1fe7b22a\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=1fe7b22a&scoped=true&lang=scss\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=1fe7b22a&scoped=true&lang=scss\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"58285072\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".el-menu .el-menu-item[data-v-1fe7b22a],.el-menu .el-sub-menu__title[data-v-1fe7b22a]{color:#666;font-size:.08333rem;position:relative}.el-menu .el-menu-item svg[data-v-1fe7b22a],.el-menu .el-sub-menu__title svg[data-v-1fe7b22a]{font-size:.13542rem;margin:-.01042rem .05208rem 0 0}.el-menu .el-menu-item .xian[data-v-1fe7b22a],.el-menu .el-sub-menu__title .xian[data-v-1fe7b22a]{position:absolute;left:.18229rem;top:0;bottom:0;border-left:.01042rem solid #edeff2}.el-menu .el-menu-item.is-active[data-v-1fe7b22a],.el-menu .el-menu-item[data-v-1fe7b22a]:hover,.el-menu .el-sub-menu__title.is-active[data-v-1fe7b22a],.el-menu .el-sub-menu__title[data-v-1fe7b22a]:hover{background-color:rgba(0,0,0,.1);color:var(--color1,#0c969a)}.el-menu .el-menu-item.is-active .xian[data-v-1fe7b22a],.el-menu .el-menu-item:hover .xian[data-v-1fe7b22a],.el-menu .el-sub-menu__title.is-active .xian[data-v-1fe7b22a],.el-menu .el-sub-menu__title:hover .xian[data-v-1fe7b22a]{border-left:.01042rem solid var(--color1,#0c969a)}.el-menu--collapse .el-menu-item svg[data-v-1fe7b22a],.el-menu--collapse .el-sub-menu__title svg[data-v-1fe7b22a]{margin:0}.el-menu--vertical .el-menu[data-v-1fe7b22a]{background-color:#fff}.el-menu--vertical .el-menu .el-menu-item[data-v-1fe7b22a]:hover{background-color:rgba(0,0,0,.1)}.content[data-v-1fe7b22a]{height:100%;background:#fff;padding:.10417rem .05208rem}.content .search[data-v-1fe7b22a]{height:.41667rem;display:flex;justify-content:space-between}.content .table_box[data-v-1fe7b22a]{height:calc(100% - .41667rem)}.changeUserStatus_content[data-v-1fe7b22a]{display:flex;justify-content:center;align-items:center}.changeUserStatus_content span[data-v-1fe7b22a]{margin:0 .10417rem}\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}